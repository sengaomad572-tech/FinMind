<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ALFA AQLI v4.0 | Ultra Stable</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body { background: #010409; color: #e6edf3; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        
        /* Sahifa o'zgarmasligi uchun qat'iy o'lchamlar */
        .app-container { max-width: 500px; margin: 0 auto; min-height: 100vh; position: relative; }
        .content-section { display: none; padding-bottom: 100px; }
        .content-section.active { display: block; animation: fadeIn 0.2s ease-in; }
        
        .glass-card { background: #0d1117; border: 1px solid #30363d; border-radius: 20px; overflow: hidden; }
        
        /* Grafik uchun barqaror maydon */
        #chart-wrapper { height: 400px; background: #0d1117; border-radius: 16px; position: relative; }
        
        .nav-active { color: #58a6ff !important; position: relative; }
        .nav-active::after { content: ''; position: absolute; top: -10px; width: 20px; height: 3px; background: #58a6ff; border-radius: 10px; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="app-container">
        <header class="p-4 flex justify-between items-center sticky top-0 bg-[#010409]/80 backdrop-blur-md z-50">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                    <i data-lucide="zap" class="w-5 h-5 text-white"></i>
                </div>
                <h1 class="font-extrabold text-xl uppercase tracking-tighter">ALFA<span class="text-blue-500">AQLI</span></h1>
            </div>
            <button class="bg-yellow-500/10 text-yellow-500 border border-yellow-500/20 px-4 py-1.5 rounded-full text-[10px] font-black">PREMIUM</button>
        </header>

        <main class="p-4">
            
            <section id="sec-bozor" class="content-section active space-y-4">
                <div class="grid grid-cols-1 gap-3">
                    <div class="glass-card p-2 flex items-center border-blue-500/30">
                        <i data-lucide="search" class="w-4 h-4 ml-2 text-slate-500"></i>
                        <input type="text" id="mainSearch" placeholder="AKSIYA YOKI KRIPTO..." class="bg-transparent flex-1 p-2 outline-none text-xs font-bold uppercase">
                        <button onclick="handleAnalysis()" class="bg-blue-600 px-5 py-2 rounded-xl text-[10px] font-black">TAHLIL</button>
                    </div>
                </div>

                <div id="ai-status-box" class="glass-card p-5 border-l-4 border-blue-500">
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 id="asset-title" class="text-xl font-black">NVIDIA</h2>
                            <p id="asset-sub" class="text-[9px] text-slate-500 uppercase font-bold tracking-widest">Global Technology / AI</p>
                        </div>
                        <div class="text-right">
                            <p class="text-[8px] font-bold text-slate-500">AI SCORE</p>
                            <p id="asset-score" class="text-2xl font-black text-blue-500">94%</p>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-between items-center bg-white/5 p-3 rounded-xl">
                        <span class="text-[10px] font-bold text-slate-400">TAVSIYA:</span>
                        <span id="asset-rec" class="font-black text-green-500 uppercase">Kuchli Xarid</span>
                    </div>
                </div>

                <div id="chart-wrapper" class="glass-card">
                    <div id="tradingview_main" style="height: 100%;"></div>
                </div>
            </section>

            <section id="sec-signallar" class="content-section space-y-3">
                <h3 class="font-black text-sm uppercase text-slate-500">Eng so'nggi signallar</h3>
                <div id="signals-container" class="space-y-3"></div>
            </section>

            <section id="sec-bilim" class="content-section text-center py-20">
                <i data-lucide="lock" class="w-12 h-12 mx-auto text-slate-700 mb-4"></i>
                <h2 class="text-2xl font-black">PRO TERMINAL</h2>
                <p class="text-slate-500 text-sm mt-2 px-10">Barcha yopiq signallar va kitlar harakatini ko'rish uchun obuna bo'ling.</p>
                <button class="mt-6 bg-blue-600 px-10 py-4 rounded-2xl font-black text-xs uppercase shadow-xl shadow-blue-500/20">Hozir qo'shiling</button>
            </section>

        </main>

        <nav class="fixed bottom-0 left-0 w-full bg-[#0d1117] border-t border-[#30363d] flex justify-around p-3 z-[100] backdrop-blur-xl">
            <button onclick="changeTab('bozor')" id="tab-bozor" class="nav-btn nav-active flex flex-col items-center gap-1 flex-1">
                <i data-lucide="layout-grid" class="w-5 h-5"></i>
                <span class="text-[9px] font-bold uppercase">Bozor</span>
            </button>
            <button onclick="changeTab('signallar')" id="tab-signallar" class="nav-btn text-slate-500 flex flex-col items-center gap-1 flex-1">
                <i data-lucide="zap" class="w-5 h-5"></i>
                <span class="text-[9px] font-bold uppercase">Signallar</span>
            </button>
            <button onclick="changeTab('bilim')" id="tab-bilim" class="nav-btn text-slate-500 flex flex-col items-center gap-1 flex-1">
                <i data-lucide="graduation-cap" class="w-5 h-5"></i>
                <span class="text-[9px] font-bold uppercase">Bilim</span>
            </button>
        </nav>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        lucide.createIcons();

        // 1. Tab boshqaruvi (Sahifa o'zgarmasligi uchun)
        function changeTab(tabId) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            
            document.getElementById(`sec-${tabId}`).classList.add('active');
            document.getElementById(`tab-${tabId}`).classList.add('nav-active');

            if(tabId === 'bozor') initChart('NVDA');
            if(tabId === 'signallar') renderSignals();
        }

        // 2. Grafikni barqaror yuklash
        function initChart(symbol) {
            new TradingView.widget({
                "autosize": true,
                "symbol": symbol,
                "interval": "D",
                "timezone": "Etc/UTC",
                "theme": "dark",
                "style": "1",
                "locale": "uz",
                "container_id": "tradingview_main",
                "hide_top_toolbar": true,
                "hide_legend": true,
                "save_image": false
            });
        }

        // 3. Qidiruv va Tahlil
        function handleAnalysis() {
            const input = document.getElementById('mainSearch').value.toUpperCase();
            if(!input) return;

            // Avtomatik aniqlash: Agar 3-4 harf bo'lsa aksiya, agar BTC/ETH bo'lsa kripto
            const isCrypto = ['BTC', 'ETH', 'SOL', 'TRX', 'DOGE'].includes(input);
            const finalSymbol = isCrypto ? `BINANCE:${input}USDT` : input;

            initChart(finalSymbol);
            
            // UI Yangilash
            document.getElementById('asset-title').innerText = input;
            const mockScore = Math.floor(Math.random() * 25 + 70);
            document.getElementById('asset-score').innerText = mockScore + "%";
            document.getElementById('asset-rec').innerText = mockScore > 85 ? "Kuchli Xarid" : "Sotib olish";
        }

        // 4. Signallar generatori
        function renderSignals() {
            const container = document.getElementById('signals-container');
            const mockData = [
                {n: 'BTC', s: '98%', r: 'BUY', c: 'text-green-500'},
                {n: 'TSLA', s: '45%', r: 'SELL', c: 'text-red-500'},
                {n: 'AAPL', s: '82%', r: 'BUY', c: 'text-green-500'}
            ];
            container.innerHTML = mockData.map(item => `
                <div class="glass-card p-4 flex justify-between items-center">
                    <div><p class="font-black">${item.n}</p><p class="text-[8px] text-slate-500">AI SIGNAL</p></div>
                    <div class="font-bold text-blue-500">${item.s}</div>
                    <div class="font-black ${item.c}">${item.r}</div>
                </div>
            `).join('');
        }

        window.onload = () => initChart('NVDA');
    </script>
</body>
</html>
